
@{
    ViewData["Title"] = "Chi tiết đơn hàng";
    Layout = "_Home";
    Dondathang dh = ViewData["Dondathang"] as Dondathang;
}

<div class="container bg-white p-3" style="border-radius: 20px; margin-top: 85px;height:85vh;overflow-y:scroll">
    <div class="d-flex">
        <a style="text-decoration:none;" href="/Home/Index">Home</a> / <form asp-controller="Home" asp-action="OrderedDetails">
            <input type="hidden" name="Madh" value="@dh.Madh" />
            <input type="hidden" name="Sdt" value="@dh.IdkhNavigation.Sdt" />
            <button type="submit" style="text-decoration: none; color: #0d6efd;background-color:#fff;border:none">Lịch sử đơn hàng</button>
        </form>/ <a style="text-decoration: none; color: #de0146" href="#">Lịch sử đơn hàng</a>
    </div>
    @{
        DateTime ngaydukiengiao = dh.Ngaydat.AddDays(3);

    }
    <div class="mt-2">
        @if (dh.Trangthai == 0)
        {
            <div class="">
                <div class="card" style="border:none;margin-top:0px;margin-bottom:0px">
                    <div class="row d-flex justify-content-between align-items-center px-3 ">
                        <div class="d-flex col-lg-6 col-sm-12">
                            <h5>
                                Đơn hàng
                                <span class="text-primary font-weight-bold">#@dh.Madh</span>
                            </h5>
                        </div>
                        <div class=" col-lg-6 col-sm-12 d-flex flex-column text-sm-right">
                            <p class="mb-0">
                                Ngày giao dự kiến <span class="font-weight-bold">@ngaydukiengiao.ToString("dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture)</span>
                            </p>
                            @*<p>
                                    USPS <span class="font-weight-bold">2374723467163473124234</span>
                                </p>*@
                        </div>
                    </div>
                    <!-- Add class "active" to progress -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-12">
                            <ul id="progressbar" class="text-center">
                                <li class="active step0"></li>
                                <li class=" step0"></li>
                                <li class=" step0"></li>
                                <li class="step0"></li>
                            </ul>
                        </div>
                    </div>
                    <div class="row justify-content-between ">
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:90px">
                            <img src="~/DeliveryProgress/images/CheckList.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đang xử lý</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:70px">
                            <img src="~/DeliveryProgress/images/Delivery.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đã xuất kho</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:70px">
                            <img src="~/DeliveryProgress/images/Shipping.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đang vận chuyển</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:100px">
                            <img src="~/DeliveryProgress/images/Home.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đã giao</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        }@if (dh.Trangthai == 1)
        {
            <div class="">
                <div class="card" style="border:none;margin-top:0px;margin-bottom:0px">

                    <div class="row d-flex justify-content-between align-items-center px-3 top">
                        <div class="d-flex col-lg-6 col-sm-12">
                            <h5>
                                Đơn hàng
                                <span class="text-primary font-weight-bold">#@dh.Madh</span>
                            </h5>
                        </div>
                        <div class="d-flex flex-column text-sm-right col-lg-6 col-sm-12">
                            <p class="mb-0">
                                Ngày giao dự kiến <span class="font-weight-bold">@ngaydukiengiao.ToString("dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture)</span>
                            </p>
                            @*<p>
                                    USPS <span class="font-weight-bold">2374723467163473124234</span>
                                </p>*@
                        </div>
                    </div>
                    <!-- Add class "active" to progress -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-12">
                            <ul id="progressbar" class="text-center">
                                <li class="active step0"></li>
                                <li class="active step0"></li>
                                <li class=" step0"></li>
                                <li class="step0"></li>
                            </ul>
                        </div>
                    </div>
                    <div class="row justify-content-between">
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:90px">
                            <img src="~/DeliveryProgress/images/CheckList.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đang xử lý</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:70px">
                            <img src="~/DeliveryProgress/images/Delivery.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đã xuất kho</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:70px">
                            <img src="~/DeliveryProgress/images/Shipping.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đang vận chuyển</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:100px">
                            <img src="~/DeliveryProgress/images/Home.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đã giao</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (dh.Trangthai == 2)
        {
            <div class="">
                <div class="card" style="border:none;margin-top:0px;margin-bottom:0px">

                    <div class="row d-flex justify-content-between align-items-center px-3 top">
                        <div class="d-flex col-lg-6 col-sm-12">
                            <h5>
                                Đơn hàng
                                <span class="text-primary font-weight-bold">#@dh.Madh</span>
                            </h5>
                        </div>
                        <div class="d-flex flex-column text-sm-right col-lg-6 col-sm-12">
                            <p class="mb-0">
                                Ngày giao dự kiến <span class="font-weight-bold">@ngaydukiengiao.ToString("dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture)</span>
                            </p>
                            @*<p>
                                    USPS <span class="font-weight-bold">2374723467163473124234</span>
                                </p>*@
                        </div>
                    </div>
                    <!-- Add class "active" to progress -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-12">
                            <ul id="progressbar" class="text-center">
                                <li class="active step0"></li>
                                <li class="active step0"></li>
                                <li class="active step0"></li>
                                <li class="step0"></li>
                            </ul>
                        </div>
                    </div>
                    <div class="row justify-content-between ">
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:90px">
                            <img src="~/DeliveryProgress/images/CheckList.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đang xử lý</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:70px">
                            <img src="~/DeliveryProgress/images/Delivery.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đã xuất kho</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:70px">
                            <img src="~/DeliveryProgress/images/Shipping.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đang vận chuyển</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:100px">
                            <img src="~/DeliveryProgress/images/Home.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đã giao</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (dh.Trangthai == 3)
        {
            <div class="">
                <div class="card" style="border:none;margin-top:0px;margin-bottom:0px">

                    <div class="row d-flex justify-content-between align-items-center px-3 top">
                        <div class="d-flex col-lg-6 col-sm-12">
                            <h5>
                                Đơn hàng
                                <span class="text-primary font-weight-bold">#@dh.Madh</span>
                            </h5>
                        </div>
                        <div class="d-flex flex-column text-sm-right col-lg-6 col-sm-12">
                            <p class="mb-0">
                                Ngày giao dự kiến <span class="font-weight-bold">@ngaydukiengiao.ToString("dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture)</span>
                            </p>

                        </div>
                    </div>
                    <!-- Add class "active" to progress -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-12">
                            <ul id="progressbar" class="text-center">
                                <li class="active step0"></li>
                                <li class="active step0"></li>
                                <li class="active step0"></li>
                                <li class="active step0"></li>
                            </ul>
                        </div>
                    </div>
                    <div class="row justify-content-between ">
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:90px">
                            <img src="~/DeliveryProgress/images/CheckList.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đang xử lý</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:70px">
                            <img src="~/DeliveryProgress/images/Delivery.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đã xuất kho</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:70px">
                            <img src="~/DeliveryProgress/images/Shipping.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đang vận chuyển</p>
                            </div>
                        </div>
                        <div class="col-lg-3 d-flex icon-content" style="padding-left:100px">
                            <img src="~/DeliveryProgress/images/Home.png" alt="" class="icon" />
                            <div class="d-flex flex-column">
                                <p class="font-weight-bold">Đơn hàng <br />Đã giao</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
        @if (dh.Trangthai == 4)
        {

        }
    </div>
    <table class="table table-striped table-bordered  " id="productTable">
        <thead>
            <tr>
                <th class="text-center">STT</th>
                <th class="text-center" style="width:150px;">Ảnh</th>
                <th class="text-center" style="width:400px">Sản phẩm</th>
                <th class="text-center">SL</th>
                <th class="text-center">Giá</th>
                <th class="text-center">Hạn bảo hành</th>
                <th class="text-center">Thành tiền</th>
            </tr>
        </thead>
        <tbody>
            @{
                int count = 1;
                float total = 0;
            }
            @if (ViewData["OrderedDetailsMulti"] != null)
            {
                @foreach (var item in ViewData["OrderedDetailsMulti"] as List<Noidungddh>)
                {

                    <tr>
                        <td class="d-flex justify-content-center">@count</td>
                        <td><img src="/Images/@item.IdhhNavigation.Hinhanh" style="width:100%;height:150px" /></td>
                        <td>@item.IdhhNavigation.Tenvl</td>
                        <td class="text-center">@item.Soluong</td>
                        @{
                            string Dongia = (item.Dongia).ToString("#,###.##");
                            string Thanhtien = (item.Soluong * item.Dongia).ToString("#,###.##");
                            total = total + (item.Soluong * item.Dongia);
                        }
                        <td class="text-right">@Dongia đ</td>

                        @if (item.Hethanbh != null)
                        {
                            DateTime Hethanbh = (DateTime)item.Hethanbh;
                            <td class="text-center">@Hethanbh.ToString("dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture)</td>

                        }
                        else
                        {
                            <td></td>
                        }
                        <td class="text-right">@Thanhtien đ</td>

                        @{ count++; }
                    </tr>
                }

            }
            <tr>
                <td></td>
                <td style="font-weight:bolder">Tổng đơn</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                @{
                    string Tongtien = total.ToString("#,###.##");
                }
                <td class="text-right" style="font-weight:bolder">@Tongtien đ</td>

            </tr>


        </tbody>
    </table>

</div>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>

